/**
 * CRM Objects
 * CRM objects such as companies, contacts, deals, line items, products, tickets, and quotes are native objects in HubSpotâ€™s CRM. These core building blocks support custom properties, store critical information, and play a central role in the HubSpot application.  ## Supported Object Types  This API provides access to collections of CRM objects, which return a map of property names to values. Each object type has its own set of default properties, which can be found by exploring the [CRM Object Properties API](https://developers.hubspot.com/docs/methods/crm-properties/crm-properties-overview).  |Object Type |Properties returned by default | |--|--| | `companies` | `name`, `domain` | | `contacts` | `firstname`, `lastname`, `email` | | `deals` | `dealname`, `amount`, `closedate`, `pipeline`, `dealstage` | | `products` | `name`, `description`, `price` | | `tickets` | `content`, `hs_pipeline`, `hs_pipeline_stage`, `hs_ticket_category`, `hs_ticket_priority`, `subject` |  Find a list of all properties for an object type using the [CRM Object Properties](https://developers.hubspot.com/docs/methods/crm-properties/get-properties) API. e.g. `GET https://api.hubapi.com/properties/v2/companies/properties`. Change the properties returned in the response using the `properties` array in the request body.
 *
 * OpenAPI spec version: v3
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

import localVarRequest = require('request');
import http = require('http');

/* tslint:disable:no-unused-locals */
import { CollectionResponseWithTotalSimplePublicObject } from '../model/collectionResponseWithTotalSimplePublicObject';
import { PublicObjectSearchRequest } from '../model/publicObjectSearchRequest';

import { ObjectSerializer, Authentication, HttpBasicAuth, ApiKeyAuth, OAuth, VoidAuth } from '../model/models';

let defaultBasePath = 'https://api.hubapi.com/crm/v3/objects';

// ===============================================
// This file is autogenerated - Please do not edit
// ===============================================

export enum SearchApiApiKeys {
    hapikey,
}

export class SearchApi {
    protected _basePath = defaultBasePath;
    protected defaultHeaders : any = {};
    protected _useQuerystring : boolean = false;

    protected authentications = {
        'default': <Authentication>new VoidAuth(),
        'hapikey': new ApiKeyAuth('query', 'hapikey'),
        'oauth2': new OAuth(),
    }

    constructor(basePath?: string);
    constructor(basePathOrUsername: string, password?: string, basePath?: string) {
        if (password) {
            if (basePath) {
                this.basePath = basePath;
            }
        } else {
            if (basePathOrUsername) {
                this.basePath = basePathOrUsername
            }
        }
    }

    set useQuerystring(value: boolean) {
        this._useQuerystring = value;
    }

    set basePath(basePath: string) {
        this._basePath = basePath;
    }

    get basePath() {
        return this._basePath;
    }

    public setDefaultAuthentication(auth: Authentication) {
        this.authentications.default = auth;
    }

    public setApiKey(key: SearchApiApiKeys, value: string) {
        (this.authentications as any)[SearchApiApiKeys[key]].apiKey = value;
    }

    set accessToken(token: string) {
        this.authentications.oauth2.accessToken = token;
    }

    /**
     * # Filter, Sort, and Search CRM Objects  The CRM Search API is a powerful API that allows developers to filter, sort, and search across all CRM object types, including contacts, deals, companies and tickets. Using this API, developers can more efficiently retrieve a subset of data they are looking for to better suit their business needs.  Common use cases this API allows for include, but are not limited to the following: <ul> <li>Getting a list of contacts for a specific account</li> <li>Retrieving a list of all open deals</li> <li>Searching for contacts by custom properties</li> <li>& more</li> </ul>  Prerequisite for using this API: To use the CRM Search API with an OAuth token, your app must request and be granted access to the contacts scope.  <br /> `engagements` including `tasks`, `calls`, `emails`, and `notes` are not supported.  <br /> ## Filter  Use `filters` in the request body to limit results to specific CRM objects.  *Example*: Find all contacts with a first name of \"Alice\" ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"filters\": [       {         \"propertyName\": \"firstname\",         \"operator\": \"EQ\",         \"value\": \"Alice\"       }     ]   }' ```  When multiple filters are provided, they will be combined using a logical AND operator. The system supports a maximum of three filters.   <br /> ### Operators  Supported operators include `EQ`, `NEQ`, `LT`, `LTE`, `GT`, `GTE`, `HAS_PROPERTY`, `NOT_HAS_PROPERTY`.  <br /> ### Associations You can find objects associated with a different object type by ID using the `associations.{objectType}` psuedo-property. Support for this is limited to `deals` and `tickets`.  Supported association filters: |Object Type |Filter `propertyName` | |--|--| | `deals` | `associations.company`, `associations.contact`, `associations.ticket` | | `tickets` | `associations.company`, `associations.contact`, `associations.deal` |  *Example*: Find all tickets associated with the contact using ID \"123\" ``` curl --request POST https://api.hubapi.com/crm/v3/objects/tickets/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"filters\": [       {         \"propertyName\": \"associations.contact\",         \"operator\": \"EQ\",         \"value\": \"123\"       }     ]   }' ```  <br /> ## Sort  Use `sorts`, which contain a property name and a direction, to sort the returned collection.  *Example*: List all contacts with most recently created first ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"sorts\": [       {         \"propertyName\": \"createdate\",         \"direction\": \"DESCENDING\"       }     ]   }' ``` The system supports a single sort.   <br /> ## Search  Perform a text search against all property values for an object type. By default, the results will be returned in order of object creation (oldest first) but this can be overridden using `sorts`.  *Example*: Find all contacts with a property value containing the letter `x` ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"query\": \"x\"   }' ```  <br /> ## Controlling returned properties  Each object type is returned with a default set of properties. You can override this by providing an array of property names in the `properties` property of the request body.  *Example*: Return all contacts and include their email and mailing address state ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"properties\": [ \"email\", \"state\" ]   }' ```  <br /> ## Paging through results By default, the Search API returns results containing 10 objects per page. The system supports a maximum of 100 results per page.  *Example*: Get pages of size 20 ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"limit\": 20   } ```  In order to access the next page of results, you must pass the `after` parameter that was provided in the previous response in the `paging.next.after` property. If no `paging.next.after` property is provided, no additional results will be shown. Note that the after parameter is expected to be a string.  *Example*: Get the next page of results ``` curl --request POST https://api.hubapi.com/crm/v3/objects/contacts/search?hapikey=demo \\   --header \"Content-Type: application/json\" \\   --data '{     \"after\": \"20\"   }' ```  <br /> ## Sample Response (Success)  ``` {   \"results\": [     {       \"id\": \"174\",       \"properties\": {         \"firstname\": \"Brantley\",         \"lastname\": \"Forrest\",         \"email\": \"bforrest8@acme.com\"       },       \"createdAt\":\"2019-10-30T03:30:17.883Z\",       \"updatedAt\": \"1569516907T16:50:06.678Z\",       \"archived\": false     },     ...   ],   \"paging\": {     \"next\": {       \"after\": \"10\"     }   } } ```  <br /> ## Limitations  1. It can take a few moments between creating or updating a CRM object in HubSpot and seeing it in CRM Search API results. 2. CRM objects in an archived state will not be available in the Search API. 3. The Search API is rate limited to 1 request per second per authentication token, which is more stringent than our general rate limits. The `X-HubSpot-RateLimit-*` headers will not reflect this during the beta period. Read more about [rate limits](https://developers.hubspot.com/docs/faq/working-within-the-hubspot-api-rate-limits).  <br /> ## Error Handling Read our [error documentation](https://developers.hubspot.com/docs/faq/api-error-responses).
     * @summary Filter, Sort, and Search CRM Objects
     * @param objectType 
     * @param publicObjectSearchRequest 
     */
    public doSearch (objectType: string, publicObjectSearchRequest?: PublicObjectSearchRequest) : Promise<{ response: http.IncomingMessage; body: CollectionResponseWithTotalSimplePublicObject;  }> {
        const localVarPath = this.basePath + '/{objectType}/search'
            .replace('{' + 'objectType' + '}', encodeURIComponent(String(objectType)));
        let localVarQueryParameters: any = {};
        let localVarHeaderParams: any = (<any>Object).assign({}, this.defaultHeaders);
        let localVarFormParams: any = {};

        // verify required parameter 'objectType' is not null or undefined
        if (objectType === null || objectType === undefined) {
            throw new Error('Required parameter objectType was null or undefined when calling doSearch.');
        }


        let localVarUseFormData = false;

        let localVarRequestOptions: localVarRequest.Options = {
            method: 'POST',
            qs: localVarQueryParameters,
            headers: localVarHeaderParams,
            uri: localVarPath,
            useQuerystring: this._useQuerystring,
            json: true,
            body: ObjectSerializer.serialize(publicObjectSearchRequest, "PublicObjectSearchRequest")
        };

        this.authentications.hapikey.applyToRequest(localVarRequestOptions);

        this.authentications.oauth2.applyToRequest(localVarRequestOptions);

        this.authentications.default.applyToRequest(localVarRequestOptions);

        if (Object.keys(localVarFormParams).length) {
            if (localVarUseFormData) {
                (<any>localVarRequestOptions).formData = localVarFormParams;
            } else {
                localVarRequestOptions.form = localVarFormParams;
            }
        }
        return new Promise<{ response: http.IncomingMessage; body: CollectionResponseWithTotalSimplePublicObject;  }>((resolve, reject) => {
            localVarRequest(localVarRequestOptions, (error, response, body) => {
                if (error) {
                    reject(error);
                } else {
                    body = ObjectSerializer.deserialize(body, "CollectionResponseWithTotalSimplePublicObject");
                    if (response.statusCode && response.statusCode >= 200 && response.statusCode <= 299) {
                        resolve({ response: response, body: body });
                    } else {
                        reject({ response: response, body: body });
                    }
                }
            });
        });
    }
}
